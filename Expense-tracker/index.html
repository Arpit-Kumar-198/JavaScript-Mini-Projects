<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Expense Tracker App</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4Q6Gf2aSP4eDXB8Miphtr37CMZZQ5oXLH2yaXMJ2w8e2ZtHTl7GptT4jmndRuHDT" crossorigin="anonymous">
    <style>
        /* F1EFEC
        D4C9BE
        123458
        030303 */
        *{
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', 'sans-serif';
        }
        body{
            background-color: #b7c6d2;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .container{
            margin: 100px 20px 20px 20px;
            max-width: 900px;
            background-color: #FAF1E6;
            border-radius: 25px;
            padding: 25px;
            box-shadow: 0px 0px 4px rgb(0, 0, 0);
        }
        .head{
            display: flex;
            justify-content: space-evenly;
            align-items: center;
            background-color: #1f2833;
            color: #fff;
            padding: 20px;
            border-radius: 30px;
            box-shadow: 0 0 5px rgba(0,0,0,0.9);
        }


        .total-expense{
            padding: 2px;
        }

        .expense-box{
            margin: 40px 0 0 0;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
        }
        #expense-form input{
            padding: 10px;
            border-radius: 10px;
            margin: 5px;
            width: 200px;
           
        }
        .expense-btn{
            margin: 5px;
            height: 48px;
            width: 150px;
            
        }
        .delete-btn{
            margin: 5px;
            height: 38px;
            width: 130px;
            border-radius: 15px;
        }
        .expense-info{
            display: flex;
            align-items: center;
            background-color: #DFD0B8;
            padding: 0 10px 0 10px;
            border-radius: 15px;
            margin-top: 15px;
        }
         .expense-info div{
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 20px;
            font-weight: 500;
            width: 200px;
            height: 48px;
            margin: 5px;
            padding: 10px;
        }
        button:hover {
            transform: scale(1.05);
            transition: all 0.3s ease-in-out;
        }

        
    </style>
</head>
<body>
    <div class="container">
        <div class="head">
            <h1>Total Expense</h1>
            <div class="badge text-bg-primary text-wrap" style="width: 10rem;"><h2><span  class="total-expense">0</span> ₹</h2></div>
        </div>

        <div class="expense-box">
            <form id="expense-form">
                <input type="text" id="title" placeholder="Enter title" required="true" />
                <input type="number" id="amount" placeholder="Enter amount" required="true" />
                <input type="date" id="date" required="true" />
                <button type="button" class="btn btn-success expense-btn">Add Expense</button>
            </form>
            

            <div class="content-box">
                <!-- <div class="expense-info">
                    <div>Food</div>
                    <div>100 ₹</div>
                    <div>23/05/2023</div>
                    <button type="button" class="btn btn-danger delete-btn">Delete</button>
                </div> -->
            </div>

    </div>
    <script>
        const addButton = document.querySelector('.expense-btn');
        const deleteButtons = document.querySelectorAll('.delete-btn');
        const title = document.querySelector('#title');
        const amount = document.querySelector('#amount');
        const date = document.querySelector('#date');
        const contentBox = document.querySelector('.content-box');

        const totalExpense = document.querySelector(".total-expense");
        show();
        function show(){

            contentBox.innerHTML = localStorage.getItem("Expenses");
            totalExpense.innerText = localStorage.getItem("TotalExpense") || 0;
        
        }
        function storage(){
            localStorage.setItem("Expenses",contentBox.innerHTML);
            localStorage.setItem("TotalExpense",totalExpense.innerText) || 0;
        }
        function updateTotalExpense(amount){
           let currentTotal = parseFloat(localStorage.getItem("TotalExpense")) || 0;
            let newTotal = currentTotal + parseFloat(amount);
            totalExpense.innerText = newTotal;
            localStorage.setItem("TotalExpense", newTotal);
        }
        addButton.addEventListener('click', () => {
        // Trim values to remove spaces
        const titleVal = title.value.trim();
        const amountVal = amount.value.trim();
        const dateVal = date.value.trim();

        // Validate all fields
        if (!titleVal || !amountVal || !dateVal || parseFloat(amountVal) <= 0) {
            alert("Please fill all fields correctly before adding.");
            return;
        }

        let expenseInfo = document.createElement("div");
        expenseInfo.className = "expense-info";
        let titleBox = document.createElement("div");
        let ammountBox = document.createElement("div");
        let dateBox = document.createElement("div");
        let deleteBtn = document.createElement("button");
        deleteBtn.className = "btn btn-danger delete-btn";
        deleteBtn.innerText = "Delete";

        titleBox.innerText = titleVal;
        ammountBox.innerText = amountVal + " ₹";
        dateBox.innerText = dateVal;
        expenseInfo.appendChild(titleBox);
        expenseInfo.appendChild(ammountBox);
        expenseInfo.appendChild(dateBox);
        expenseInfo.appendChild(deleteBtn);

        contentBox.appendChild(expenseInfo);
        let tempAmmount = amountVal;

        // Clear inputs
        title.value = "";
        amount.value = "";
        date.value = "";

        storage();
        updateTotalExpense(tempAmmount);
    });



    contentBox.addEventListener('click', function (e) {
        if (e.target.classList.contains('delete-btn')) {
        const expenseItem = e.target.parentElement;
        const amountText = expenseItem.children[1].innerText; // e.g., "100 ₹"
        const amountValue = parseFloat(amountText.split(' ')[0]);

        // Subtract from total
        let currentTotal = parseFloat(localStorage.getItem("TotalExpense")) || 0;
        let newTotal = currentTotal - amountValue;
        totalExpense.innerText = newTotal;
        localStorage.setItem("TotalExpense", newTotal);
        expenseItem.remove();
        storage(); // update localStorage with the new DOM
    }

    });

    </script>
</body>
</html>